{{ $view := . -}}
package gdextension

/*------------------------------------------------------------------------------
//   This code was generated by template classes.refs.go.tmpl.
//
//   Changes to this file may cause incorrect behavior and will be lost if
//   the code is regenerated. Any updates should be done in
//   "classes.refs.go.tmpl" so they can be included in the generated
//   code.
//----------------------------------------------------------------------------*/

//revive:disable

// refcount classes
{{ range $i, $c := $view.FilteredRefcountedClasses -}}
{{ $refInterfaceName := (printf "Ref%s" $c.Name) -}}
{{ $refStructName := (printf "Ref%sImpl" $c.Name) -}}
var _ {{ $refInterfaceName }} = &{{ $refStructName }}{}
var _ Ref = &{{ $refStructName }}{}

type {{ $refInterfaceName }} interface {
	Ref
	TypedPtr() {{ $c.Name }}
	{{/* TypedRef({{ $refInterfaceName }}) */}}
}

type {{ $refStructName }} typedRef[{{ $c.Name }}]

func (r *{{ $refStructName }}) Ptr() RefCounted {
	rg := (*typedRef[{{ $c.Name }}])(r)
	return rg.Ptr().(RefCounted)
}

func (r *{{ $refStructName }}) TypedPtr() {{ $c.Name }} {
	rg := (*typedRef[{{ $c.Name }}])(r)
	return rg.TypedPtr()
}

func (r *{{ $refStructName }}) Ref(from Ref) {
	rg := (*typedRef[{{ $c.Name }}])(r)
	rg.Ref(from)
}

func (r *{{ $refStructName }}) TypedRef(from *{{ $refStructName }}) {
	rg := (*typedRef[{{ $c.Name }}])(r)
	t := (*typedRef[{{ $c.Name }}])(from)
	rg.TypedRef((*typedRef[{{ $c.Name }}])(t))
}

func (r *{{ $refStructName }}) Unref() {
	rg := (*typedRef[{{ $c.Name }}])(r)
	rg.Unref()
}

func (r *{{ $refStructName }}) IsValid() bool {
	return r != nil && r.reference != nil
}

func New{{ $refInterfaceName }}(reference {{ $c.Name }}) {{ $refInterfaceName }} {
	return ({{ $refInterfaceName }})(NewTypedRef[{{ $c.Name }}](reference))
}

func new{{ $refInterfaceName }}AsRef(reference RefCounted) Ref {
	return (Ref)(newTypedRefGDExtensionIternalConstructor[{{ $c.Name }}](reference.({{ $c.Name }})))
}

func new{{ $refInterfaceName }}GDExtensionIternalConstructor(reference {{ $c.Name }}) {{ $refInterfaceName }} {
	return newTypedRefGDExtensionIternalConstructor[{{ $c.Name }}](reference)
}
{{ end -}}

func registerEngineClassRefs() {
	gdClassRefConstructors.Clear()
	{{ range $i, $c := $view.FilteredRefcountedClasses -}}
	{{ $refInterfaceName := (printf "Ref%s" $c.Name) -}}
	{{ $refStructName := (printf "Ref%sImpl" $c.Name) -}}
	gdClassRefConstructors.Set("{{ $c.Name }}", new{{ $refInterfaceName }}AsRef)
	{{ end -}}
}
