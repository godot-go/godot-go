{{ $view := . -}}
package gdclassimpl

/*------------------------------------------------------------------------------
//   This code was generated by template classes.refs.go.tmpl.
//
//   Changes to this file may cause incorrect behavior and will be lost if
//   the code is regenerated. Any updates should be done in
//   "classes.refs.go.tmpl" so they can be included in the generated
//   code.
//----------------------------------------------------------------------------*/

//revive:disable

import (
	. "github.com/godot-go/godot-go/pkg/gdextension/builtin"
)

// refcount classes
{{ range $i, $c := $view.FilteredRefcountedClasses -}}
{{ $refInterfaceName := (printf "Ref%s" $c.Name) -}}
{{ $refStructName := (printf "Ref%sImpl" $c.Name) -}}
var _ {{ $refInterfaceName }} = &{{ $refStructName }}{}
var _ Ref = &{{ $refStructName }}{}

type {{ $refStructName }} TypedRef[{{ $c.Name }}]

func (r *{{ $refStructName }}) Ptr() RefCounted {
	rg := (*TypedRef[{{ $c.Name }}])(r)
	return rg.Ptr().(RefCounted)
}

func (r *{{ $refStructName }}) TypedPtr() {{ $c.Name }} {
	rg := (*TypedRef[{{ $c.Name }}])(r)
	return rg.TypedPtr()
}

func (r *{{ $refStructName }}) Ref(from Ref) {
	rg := (*TypedRef[{{ $c.Name }}])(r)
	rg.Ref(from)
}

func (r *{{ $refStructName }}) TypedRef(from *{{ $refStructName }}) {
	rg := (*TypedRef[{{ $c.Name }}])(r)
	t := (*TypedRef[{{ $c.Name }}])(from)
	rg.TypedRef((*TypedRef[{{ $c.Name }}])(t))
}

func (r *{{ $refStructName }}) Unref() {
	rg := (*TypedRef[{{ $c.Name }}])(r)
	rg.Unref()
}

func (r *{{ $refStructName }}) IsValid() bool {
	return r != nil && r.Reference != nil
}

func New{{ $refInterfaceName }}(reference {{ $c.Name }}) {{ $refInterfaceName }} {
	return ({{ $refInterfaceName }})(NewTypedRef[{{ $c.Name }}](reference))
}

func New{{ $refInterfaceName }}AsRef(reference RefCounted) Ref {
	return (Ref)(NewTypedRefGDExtensionIternalConstructor[{{ $c.Name }}](reference.({{ $c.Name }})))
}

func New{{ $refInterfaceName }}GDExtensionIternalConstructor(reference {{ $c.Name }}) {{ $refInterfaceName }} {
	return NewTypedRefGDExtensionIternalConstructor[{{ $c.Name }}](reference)
}
{{ end -}}
